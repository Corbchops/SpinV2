<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Corbchops Music Collection</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background-color: #1e1e1e;
      color: #e0e0e0;
    }

    header {
      text-align: center;
      padding: 1rem;
      background-color: #2c2c2c;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
    }

    h1 {
      margin: 0;
      font-size: 2rem;
      letter-spacing: 1px;
    }

    .tab-bar {
      display: flex;
      justify-content: center;
      background-color: #2c2c2c;
    }

    .tab-button {
      padding: 0.75rem 1.5rem;
      border: none;
      background: none;
      color: #aaa;
      font-size: 1rem;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: background-color 0.2s ease, transform 0.2s ease;
    }

    .tab-button:hover {
      background-color: #3a3a3a;
    }

    .tab-button.active {
      color: #fff;
      border-color: #f0f0f0;
    }

    .view {
      padding: 1rem;
      display: none;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }

    .grid {
      display: grid;
      gap: 1rem;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      margin-top: 1rem;
      animation: gridFade 0.3s ease-in;
    }

    .album-card {
      background-color: #333;
      padding: 0.75rem;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);
      transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.4s ease;
      opacity: 0;
      transform: translateY(10px);
      animation: fadeIn 0.5s forwards;
    }

    .album-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
    }

    .album-card strong {
      display: block;
      margin-bottom: 0.5rem;
      color: #fff;
    }

    input,
    select,
    button {
      font-size: 1rem;
      padding: 0.5rem;
      margin: 0.25rem;
      border: none;
      border-radius: 4px;
      background-color: #444;
      color: #fff;
    }

    button:hover {
      background-color: #555;
      cursor: pointer;
      transform: scale(1.05);
    }

    .filter-group {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes gridFade {
      from {
        opacity: 0;
        transform: scale(0.98);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }

    @media (max-width: 600px) {
      .album-card {
        font-size: 0.9rem;
      }

      .tab-button {
        padding: 0.5rem 1rem;
      }

      .filter-group {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

  <header>
    <h1>ðŸŽ§ Corbchops Music Collection</h1>
  </header>

  <div class="tab-bar">
    <button class="tab-button active" onclick="switchTab('search')">Search</button>
    <button class="tab-button" onclick="switchTab('collection')">Collection</button>
  </div>

  <div id="searchView" class="view" style="display: block; opacity: 1; transform: translateY(0);">
    <input type="text" id="searchInput" placeholder="Search albums...">
    <button onclick="scanBarcode()">ðŸ“· Scan Barcode</button>
    <div id="searchResults" class="grid"></div>
  </div>

  <div id="collectionView" class="view">
    <div class="filter-group">
      <input type="text" id="collectionSearch" placeholder="Search your collection..." oninput="applyFilters()">
      <select id="filterArtist" onchange="applyFilters()">
        <option value="">All Artists</option>
      </select>
      <select id="filterGenre" onchange="applyFilters()">
        <option value="">All Genres</option>
      </select>
    </div>
    <div id="collectionGrid" class="grid"></div>
  </div>

  <script>
    let collection = [];

    function switchTab(tab) {
      const searchView = document.getElementById('searchView');
      const collectionView = document.getElementById('collectionView');
      const isSearch = tab === 'search';

      const fadeOut = el => {
        el.style.opacity = 0;
        el.style.transform = 'translateY(10px)';
        setTimeout(() => { el.style.display = 'none'; }, 250);
      };

      const fadeIn = el => {
        el.style.display = 'block';
        setTimeout(() => {
          el.style.opacity = 1;
          el.style.transform = 'translateY(0)';
        }, 20);
      };

      if (isSearch) {
        fadeOut(collectionView);
        fadeIn(searchView);
      } else {
        fadeOut(searchView);
        fadeIn(collectionView);
        applyFilters();
      }

      document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`.tab-button[onclick*="${tab}"]`).classList.add('active');
    }

    function scanBarcode() {
      const dummyResult = {
        title: "Aqualung",
        artist: "Jethro Tull",
        genre: "Progressive Rock",
        format: "Vinyl"
      };
      displaySearchResults([dummyResult]);
    }

    function displaySearchResults(results) {
      const container = document.getElementById('searchResults');
      container.innerHTML = '';
      results.forEach(album => {
        const card = document.createElement('div');
        card.className = 'album-card';
        card.innerHTML = `
          <strong>${album.title}</strong>
          ${album.artist}<br>
          ${album.genre} â€¢ ${album.format}<br>
          <button onclick='addToCollection(${JSON.stringify(album)})'>âž• Add</button>
        `;
        container.appendChild(card);
      });
    }

    function addToCollection(album) {
      collection.push(album);
      updateCollectionView();
      alert(`Added "${album.title}" to your collection!`);
    }

    function updateCollectionView() {
      const artistSet = new Set();
      const genreSet = new Set();
      const artistSelect = document.getElementById('filterArtist');
      const genreSelect = document.getElementById('filterGenre');

      artistSelect.innerHTML = `<option value="">All Artists</option>`;
      genreSelect.innerHTML = `<option value="">All Genres</option>`;

      collection.forEach(album => {
        artistSet.add(album.artist);
        genreSet.add(album.genre);
      });

      [...artistSet].sort().forEach(artist => {
        const opt = document.createElement('option');
        opt.value = artist;
        opt.textContent = artist;
        artistSelect.appendChild(opt);
      });

      [...genreSet].sort().forEach(genre => {
        const opt = document.createElement('option');
        opt.value = genre;
        opt.textContent = genre;
        genreSelect.appendChild(opt);
      });

      applyFilters();
    }

    function applyFilters() {
      const query = document.getElementById('collectionSearch').value.toLowerCase();
      const artistFilter = document.getElementById('filterArtist').value;
      const genreFilter = document.getElementById('filterGenre').value;
      const grid = document.getElementById('collectionGrid');

      grid.innerHTML = '';
      collection
        .filter(album => {
          const matchesQuery =
            album.title.toLowerCase().includes(query) ||
            album.artist.toLowerCase().includes(query);
          const matchesArtist = !artistFilter || album.artist === artistFilter;
          const matchesGenre = !genreFilter || album.genre === genreFilter;
          return matchesQuery && matchesArtist && matchesGenre;
        })
        .forEach(album => {
          const card = document.createElement('div');
          card.className = 'album-card';
          card.innerHTML = `
            <strong>${album.title}</strong>
            ${album.artist}<br>
            ${album.genre} â€¢ ${album.format}
          `;
          grid.appendChild(card);
        });
    }
  </script>

</body>
</html>
